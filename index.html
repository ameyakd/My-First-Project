<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://*.my.connect.aws https://*.aws.amazon.com; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline' https://amazon-connect.github.io; frame-src 'self' https://*.my.connect.aws https://*.aws.amazon.com;">
    <title>Ameya KD's Portfolio</title>
    <script src="https://amazon-connect.github.io/amazon-connect-streams/release/connect-streams.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        nav ul {
            list-style-type: none;
            padding: 0;
        }
        nav ul li {
            display: inline;
            margin-right: 10px;
        }
        h1, h2 {
            color: #2c3e50;
        }
        .project {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        .skill-tag {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 3px;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        #ccpContainer {
            width: 100%;
            height: 450px;
        }
    </style>
</head>
<body>
    <nav>
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#projects">Projects</a></li>
            <li><a href="#skills">Skills</a></li>
        </ul>
    </nav>

    <section id="home">
        <h1>Hello, I'm Ameya KD</h1>
        <button onclick="openConnectModal()">Amazon Connect Agent Login</button>
    </section>

    <section id="about">
        <h2>About Me</h2>
        <p>Welcome to my first interactive webpage! I'm passionate about technology and creating amazing things with code.</p>
    </section>

    <section id="projects">
        <h2>My Projects</h2>
        <div class="project">
            <h3>Project 1</h3>
            <p>Click to learn more about this exciting project!</p>
        </div>
        <div class="project">
            <h3>Project 2</h3>
            <p>Another amazing project in the works.</p>
        </div>
        <div class="project">
            <h3>Project 3</h3>
            <p>More exciting developments coming soon!</p>
        </div>
    </section>

    <section id="skills">
        <h2>Skills</h2>
        <div>
            <span class="skill-tag">HTML</span>
            <span class="skill-tag">CSS</span>
            <span class="skill-tag">JavaScript</span>
            <span class="skill-tag">Web Development</span>
        </div>
    </section>

    <div id="connectModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="ccpContainer"></div>
        </div>
    </div>

    <script>
        let connectInitialized = false;

        function openConnectModal() {
            const modal = document.getElementById("connectModal");
            modal.style.display = "block";
            
            if (!connectInitialized) {
                initConnect();
                connectInitialized = true;
            }
        }

        function closeConnectModal() {
            const modal = document.getElementById("connectModal");
            modal.style.display = "none";
        }

        function initConnect() {
            const ccpUrl = "https://ameyakd.my.connect.aws/connect/ccp-v2/";
            const container = document.getElementById("ccpContainer");

            const connectConfig = {
                containerDiv: container,
                ccpUrl: ccpUrl,
                loginPopup: true,
                loginPopupAutoClose: true,
                region: "ap-south-1" // Make sure this matches your Connect instance region
            };

            try {
                connect.core.initCCP(connectConfig);
                console.log("CCP initialization started");

                connect.core.onError(function(err) {
                    console.error("Connect Error:", err);
                });

                connect.core.onInitialized(function() {
                    console.log("Connect CCP initialized successfully");
                });

            } catch (error) {
                console.error("Failed to initialize Connect:", error);
                alert("Failed to connect to Amazon Connect. Please check console for details.");
            }
        }

        document.querySelector(".close").onclick = closeConnectModal;
        window.onclick = function(event) {
            if (event.target == document.getElementById("connectModal")) {
                closeConnectModal();
            }
        }
    </script>
</body>
</html>
